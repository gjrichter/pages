<!DOCTYPE html>
<html>

<!-- **********************************************************************

index_only_map_embed.html

$Comment: ixmaps map template; embedded version
$Source : index_only_map_embed.html,v $

$InitialAuthor: guenter richter $
$InitialDate: 2017/06/22 $
$Author: guenter richter $
$Id:index_only_map_embed.html 1 2021-10-17 00:00:00Z Guenter Richter $

licensed under CC-BY
$Log:index_only_map_embed.html,v $

********************************************************************** -->

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="ixmaps embed example">
	<meta name="author" content="guenter richter">
	<link rel="shortcut icon" href="https://gjrichter.github.io/ixmaps/ui/resources/images/ixmaps_logo.png">

	<title>iXMaps</title>

</head>

<body style="max-width: 1024px;margin:auto;font-family:open sans;font-size:22px">
	
	<div id="map"></div>
	
	<!--========================================================================= -->

	<script src="https://gjrichter.github.io/ixmaps/ui/js/htmlgui_api.js"></script>

	<!--========================================================================= -->

	<script type="text/javascript" charset="utf-8">

		var nuts_0 = ixmaps
			.layer("nuts_0")
			.data({
				url: "https://gisco-services.ec.europa.eu/distribution/v2/nuts/geojson/NUTS_RG_10M_2021_4326_LEVL_0.geojson",
				type: "geojson"
			})
			.binding({
				id: "CNTR_CODE"
			})
			.style({
				colorscheme: ["#dddddd"],
				linecolor: ["#dddddd"],
				linewidth: "1"
			})
			.define();

		var nuts_1 = ixmaps
			.layer("nuts_1")
			.data({
				url: "https://gisco-services.ec.europa.eu/distribution/v2/nuts/geojson/NUTS_RG_10M_2021_4326_LEVL_1.geojson",
				type: "geojson"
			})
			.binding({
				id: "CNTR_CODE"
			})
			.style({
				colorscheme: ["rgba(255,255,255,0.2)"],
				linecolor: ["black"],
				linewidth: "1"
			})
			.define();

		var choropleth = ixmaps
			.theme("nuts_0")
			.data({
				name: "themeDataObj",
				url: "../../pages/Sesso e Potere/sdg_05_50_tabular.csv",
				type: "csv",
				cache: "true"
			})
			.binding({
				geo: "geo\\TIME_PERIOD",
				value: "2021",
				title: "geo\\TIME_PERIOD"
			})
			.style({
				type: "CHOROPLETH|ZEROISNOTVALUE|LEGEND",
				colorscheme: [
					"6",
					"#ffeeee",
					"#dd00bb",
					"dynamic",
					"cold"],
				opacity: "0.2",
				ranges: [0, 20, 26, 32, 38, 47, 100],
				label: [" ", " ", " ", " ", " ", " ", " "],
				showdata: "true",
				units: "%",
				textcolor: "white",
				titlefield: "geo\\TIME_PERIOD",
				nodatacolor: "RGB(221,221,221)",
				valueupper: "1:10000000",
				valuescale: "1",
				valuedecimals: "1",
				clipframes: "19",
				clipframerate: "24",
				title: "<span style='font-family:MV boli;font-size:1.5em;font-weight:700;line-height:1em'>Tertiary education 2021 age 25-35</span>"
			})
			.define();

		// last percentage as text (aggregated)

		var texts = ixmaps
			.theme("nuts_0")
			.data({
				name: "themeDataObj",
				url: "https://raw.githubusercontent.com/gjrichter/pages/main/Sesso%20e%20Potere/dati/sdg_05_50_tabular.csv",
				type: "csv",
				cache: "true"
			})
			.filter("WHERE 2021 > 0")
			.type("CHART|LABEL|VALUES|TEXTONLY|FIXSIZE|NOLEGEND")
			.binding({
				geo: "geo\\TIME_PERIOD",
				value: "2022"
			})
			.style({
				colorscheme: [
					"RGBA(255,255,255,0.5)"
				],
				scale: "1.5",
				textcolor: "#000000",
				titlefield: "geo\\TIME_PERIOD",
				units: "%",
				chartupper: "1:5000000",
				valuedecimals: "1",
				offsety: "-1"
			})
			.meta({
				title: "<span style='font-family:MV boli;font-size:1.5em;font-weight:700'>Tertiary education 2021 age 25-35</span>"
			})
			.define()

		// from 2010 to 2021 as curves (zoom dependent)

		var curves = ixmaps
			.theme("nuts_0")
			.data({
				name: "themeDataObj",
				url: "https://raw.githubusercontent.com/gjrichter/pages/main/Sesso%20e%20Potere/dati/sdg_05_50_tabular.csv",
				type: "csv",
				cache: "true"
			})
			.filter("WHERE org_inst = GOV_NAT")
			.type("CHART|PIE|STARBURST|XLBOW|CLASSES|QUANTILE|XLRAYS|SIZEP4|")
			.binding({
				geo: "geo\\TIME_PERIOD",
				value: ["2005", "2006", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020", "2021", "2022"],
				title: "geo\\TIME_PERIOD"
			})
			.style({
				colorscheme: [
					"50",
					"#ffeeee",
					"#dd00bb",
					"dynamic",
					"cold"],
				units: "%", 
				boxcolor: "none",
				scale: "1",
				valuescale: "0.8",
				shadow: "true",
				showdata: "true",
				maxvalue: "100"
			})
			.meta({
				title: "<span style='color:#ff66ff;font-family:MV boli;font-size:1.5em;font-weight:100'>Percentuale di <span style='color:#ff66ff;font-weight:700;'>donne</span> nei governi nazionali dal 2004 al 2022</span>",
				description: "<span style='color:#ff66ff;font-family:MV boli;font-size:1.5em;font-weight:100'>da leggere in senso orario</span>"
			})
			.define();




		var attribution = '<span style="font-family:MV boli;margin-bottom:-2em">data: EUROSTAT <a href=https://ec.europa.eu/eurostat/databrowser/view/tgs00100/default/table?lang=en/" target="_blank">Total fertility rate by NUTS 2 region</a>, powered by <a href="http://ixmaps.com" target="_blank">iXMaps</a</span>';

		// ----------------------------------------
		// create the map
		// ----------------------------------------

		var	map = ixmaps.embed(
				"map", {
					mapCdn: "https://gjrichter.github.io/ixmaps",
					map: "../../maps/svg/maps/generic/winkel.svg",
					mapService: "leaflet",
					mapType: "#ffff00",
					mode: "map",
					width: "100%",
					height: "800px",
					legend: true,
					align: "right"
				},
				(map) =>
				map
				.view([50.48804553605622, 19.608398437500004], 4.5)
				.require("../../ui/js/tools/tooltip_basic.js")
				.options({
					objectscaling: "dynamic", // grafici crescono leggermente con lo zoom
					normalSizeScale: "5000000", // grandezza 'normale' al livello 1:5.000.000
					dynamicScalePow: "1.8", // dynamica, 1 crescita lineare, valori > 1 meno crescita
					panhidden: "false" // grafici visibile durante lo spostamento della mappa
				})
				.attribution(attribution)
				.layer(nuts_0)
				//.layer(choropleth)
				.layer(texts)
				.layer(curves)
			);

	</script>
</body>

</html>
